[gd_scene load_steps=11 format=3 uid="uid://durlan6er57t1"]

[ext_resource type="Script" path="res://src/PlayerController.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://jbcspp38l2ph" path="res://src/components/HurtBoxComponent.tscn" id="2_7ao4s"]
[ext_resource type="PackedScene" uid="uid://bm7uiq8faybwy" path="res://src/components/CharSpriteComponent.tscn" id="2_q0te6"]
[ext_resource type="Shader" path="res://src/mobs/hit_flash_red.gdshader" id="6"]
[ext_resource type="PackedScene" uid="uid://bs6jn61nhxn4t" path="res://src/components/health_component.tscn" id="8_5vbbj"]
[ext_resource type="PackedScene" uid="uid://td3mudn3ntgw" path="res://src/components/gun_component.tscn" id="8_bq2hw"]
[ext_resource type="PackedScene" uid="uid://b4xp22aygegm6" path="res://src/components/CharSoundComponent.tscn" id="9_p65x4"]
[ext_resource type="PackedScene" uid="uid://bwv73goppw5ma" path="res://src/components/InvulnerabilityComponent.tscn" id="10_x4bqf"]

[sub_resource type="CapsuleShape2D" id="9"]
radius = 5.0
height = 16.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_lb50b"]
resource_local_to_scene = true
shader = ExtResource("6")
shader_parameter/active = false

[node name="PlayerController" type="CharacterBody2D" node_paths=PackedStringArray("sprite_component", "hurt_box_component", "invulnerability_component", "health_component", "char_sound_component", "gun_component") groups=["player"]]
script = ExtResource("1")
speed = 100
sprite_component = NodePath("CharSpriteComponent")
hurt_box_component = NodePath("HurtBoxCompnent")
invulnerability_component = NodePath("InvulnerabilityComponent")
health_component = NodePath("HealthComponent")
char_sound_component = NodePath("CharSoundComponent")
gun_component = NodePath("GunComponent")

[node name="PlayerColisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(-1, 0)
shape = SubResource("9")

[node name="CharSpriteComponent" parent="." instance=ExtResource("2_q0te6")]
material = SubResource("ShaderMaterial_lb50b")

[node name="HurtBoxCompnent" parent="." instance=ExtResource("2_7ao4s")]

[node name="InvulnerabilityComponent" parent="." instance=ExtResource("10_x4bqf")]

[node name="HealthComponent" parent="." instance=ExtResource("8_5vbbj")]

[node name="CharSoundComponent" parent="." instance=ExtResource("9_p65x4")]

[node name="GunComponent" parent="." instance=ExtResource("8_bq2hw")]

[connection signal="body_entered" from="HurtBoxCompnent" to="." method="_on_hurt_box_compnent_body_entered"]
[connection signal="took_damage" from="HurtBoxCompnent" to="." method="_on_hurt_box_compnent_took_damage"]
[connection signal="invulnerability_ended" from="InvulnerabilityComponent" to="." method="_on_invulnerability_component_invulnerability_ended"]
[connection signal="died" from="HealthComponent" to="." method="_on_health_component_died"]
